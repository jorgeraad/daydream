# 20260212114216 - Event System

| Field              | Value |
|--------------------|-------|
| **Created**        | 2026-02-12 11:42:20 EST |
| **Last Modified**  | 2026-02-12 11:42:20 EST |
| **Status**         | todo |
| **Branch**         | — |
| **Agent**          | — |
| **Blocked-By**     | 20260212114215 |
| **Touches**        | packages/engine/src/event/EventSystem.ts, packages/engine/src/event/WorldTicker.ts, packages/engine/src/event/WorldClock.ts |
| **References**     | [Design Doc](../../docs/design.md), [PRD](../../docs/prd.md) |

## Description

Build the event system that makes the world feel alive. Includes the event queue (immediate + deferred events with condition checking), post-conversation consequence evaluation via AI, the world ticker (5-minute cycle generating contextual world changes), and the world clock tracking in-game time. Events are applied to world state and recorded in the chronicle.

## Acceptance Criteria

- [ ] EventSystem with immediate queue and deferred event queue
- [ ] Deferred events trigger when their condition is met
- [ ] Event types: ambient, minor, moderate, major, dramatic
- [ ] Effect types applied to WorldState (character_move, spawn, weather_change, etc.)
- [ ] ConsequenceEvaluator: post-conversation AI evaluation of world changes
- [ ] WorldTicker runs every 5 minutes of gameplay, generates events via AI
- [ ] WorldClock tracks in-game time (time of day, day number)
- [ ] WorldClock.getTimeOfDay() returns dawn/morning/afternoon/dusk/evening/night
- [ ] Events recorded in chronicle after processing
- [ ] Unit tests for EventSystem (queue processing, deferred condition checking)
- [ ] Unit tests for WorldClock (time progression, time-of-day calculation)
- [ ] Unit tests for effect application to WorldState
- [ ] Integration test for WorldTicker with mocked AI responses
- [ ] Integration test for ConsequenceEvaluator with mocked AI

## Implementation Steps

_To be filled in when the task is started._

## Progress Log

### 2026-02-12 11:42:20 EST
Initial creation. Extracted from design doc Sections 8 (Event System) and Section 16 Step 8.
